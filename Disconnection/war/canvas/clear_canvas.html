
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style"
	content="black-translucent">
<meta name="apple-touch-fullscreen" content="no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta id="vp" name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
<title>Canvas Test</title>

<script type='text/javascript' src='//code.jquery.com/jquery-1.9.1.js'></script>



<script type="text/javascript"
	src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css"
	href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">


<style type='text/css'>
</style>



<script type='text/javascript'>//<![CDATA[ 

var xFactor;
var yFactor;

var xxx = function doit() {
	var can = document.getElementsByTagName("canvas")[0];
	
	xFactor = window.innerWidth / can.width;
	yFactor = window.innerHeight / can.height;
	
	var rect = canvas.getBoundingClientRect();
	can.style.width = ""+ window.innerWidth-rect.left + "px";
	can.style.height = ""+window.innerHeight-rect.top + "px";

	can.addEventListener('click', function(evt) {
	    var mousePos = getMousePos(canvas, evt);
	    var message = 'position x: ' + Math.round(mousePos.x/xFactor) + ', y:' + Math.round(mousePos.y/yFactor);
	    writeMessage(canvas, message);
	  }, false);
	
  
}


function writeMessage(canvas, message) {
	console.debug("c"+message);
    var context = canvas.getContext('2d');
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.font = '8pt Calibri';
    context.fillStyle = 'black';
    context.fillText(message, 10, 25);
  }
  
function getMousePos(canvas, evt) {
    var rect = canvas.getBoundingClientRect();
    return {
      x: evt.clientX - rect.left,
      y: evt.clientY - rect.top
    };
  }
  
setTimeout(xxx, 1000);

</script>


</head>
<body>
	<canvas id="canvas" width="300px" height="300px" style="border: 1px solid black"></canvas>
</body>


</html>

